<!-- HTML -->
<div>
  <InfoRows bind:value=value />
  <div class="buttons">
    <button on:click="handleRefresh( event )" class="btnRefresh">Refresh</button>
  </div>
</div>


<!-- CSS -->
<style>
  div.buttons {
    margin-top: 10px;
    display: flex;
    background-color: #ccc;
    padding: 10px 15px;
  }

  button:hover {
    background-color: #3b6989;
  }

  button {
    display: inline-block;
    background-color: #5b8dad;
    border: 0;
    color: #ffffff;
    flex-grow: 1;
    margin: 2px 10px;
    padding: 8px 10px;
  }
</style>


<!-- Code -->
<script>
  import InfoRows from '../components/InfoRows.html';
  import { restGET, displayError } from '../util.js';

  export default {
    data () {
      return {
        value: {}
      }
    },

    components: {
      InfoRows
    },

    methods: {
      handleRefresh: function ( event ) {
        // prevent the page from reloading
        event.preventDefault();

        var self = this;
        restGET('./info', function(error, data) {
          displayError(error, false);
          if (error)
            return;
          self.set( { value: data } );
        });
      },
    }
  };
</script>
